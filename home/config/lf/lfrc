cmd open ${{
	case $(file --mime-type -Lb "$f") in
 		text/*) 
		    nvim $fx
		    ;;
		image/*)
		    imv "$fx" > /dev/null 2>&1 &
		    ;;
                video/*)
                    mpv "$fx" > /dev/null 2>&1 &
                    ;;
		application/pdf)
		    zathura "$fx" > /dev/null 2>&1 &
		    ;;
		application/gzip)
		    xournalpp "$fx" > /dev/null 2>&1 &
		    ;;
		*) 
		    for f in $fx; do
			echo $f $(file --mime-type -Lb $f)| less;
			# xdg-open $f > /dev/null 2> /dev/null &
		    done
		    ;;
	esac
}}

# show current directory in window title
cmd on-cd &{{
    # '&' commands run silently in background (which is what we want here),
    # but are not connected to stdout.
    # To make sure our escape sequence still reaches stdout we pipe it to /dev/tty
    printf "\033]0; $PWD\007" > /dev/tty
}}

# also run at startup
on-cd

# borders
#set drawbox

# ctpv previews
set previewer ctpv
set cleaner ctpvclear
&ctpv -s $id
&ctpvquit $id
